"use strict";!function(n,e){"undefined"!=typeof module&&module.exports?(e("undefined"==typeof angular?require("angular"):angular),module.exports="ActivityMonitor"):"function"==typeof define&&define.amd?define(["angular"],e):e(n.angular)}(this,function(n){function e(n){function e(){f.options.enabled=!1,clearInterval(m.inactivity),clearInterval(m.keepAlive),n.off(d,c)}function i(){n.on(d,c),f.options.enabled=!0,f.user.warning=!1,m.keepAlive=setInterval(function(){s(o)},f.options.keepAlive*t),m.inactivity=setInterval(function(){var n=Date.now(),i=n-(f.options.inactive-f.options.warning)*t,o=n-f.options.inactive*t;!f.user.warning&&f.user.action<=i&&(f.user.warning=!0,s(r)),f.user.active&&f.user.action<=o&&(f.user.active=!1,s(a),f.options.disableWhenInactive&&e())},f.options.monitor*t)}function c(){f.user.active=!0,f.user.action=Date.now(),s(u),f.user.warning&&(f.user.warning=!1,s(o))}function s(n){if(f.options.enabled){var e=Object.keys(g[n]);n&&e.length&&e.forEach(function(e){g[n][e]&&g[n][e]()})}}function v(n,e){n&&"function"==typeof e&&(n=p(n,e),g[n.name][n.space]=e,!f.options.enabled&&i())}function l(n,e){return n=p(n,e),n.space?void(g[n.name][n.space]=null):void(g[n.name]={})}function p(n,e){return n=n.split("."),n[1]||"function"!=typeof e||(n[1]=e.toString().substr(0,150).replace(/\r?\n|\r|\s+/gm,"")),{name:n[0],space:n[1]}}var f=this;f.options={enabled:!1,keepAlive:800,inactive:900,disableWhenInactive:!0,warning:60,monitor:3,DOMevents:["mousemove","mousedown","mouseup","keypress","wheel","touchstart","scroll"]};var d=f.options.DOMevents.join(" ");f.user={action:Date.now(),active:!0,warning:!1},f.activity=c,f.on=f.bind=v,f.off=f.unbind=l;var g={};g[o]={},g[a]={},g[r]={},g[u]={};var m={inactivity:null,keepAlive:null};return f}var i=n.module("ActivityMonitor",[]).service("ActivityMonitor",e),t=1e3,o="keepAlive",a="inactive",r="warning",u="activity";return e.$inject=["$document"],i});